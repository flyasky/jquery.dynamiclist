/*
 Dynamic List v 1.0.0  
 Copyright (c) 2012 Ike Lin.  All rights reserved.  Licensed under the GPL v3.
 */
(function(a){a.fn.dynamiclist=function(d){a(this).each(function(){var j=a(this);var h=a.extend({itemClass:"list-item",addClass:"list-add",removeClass:"list-remove",minSize:1,maxSize:10,withEvents:false,addCallbackFn:null,removeCallbackFn:null},d);if(h.minSize==0){j.find("."+h.itemClass+":first").hide()}var i=j.find("."+h.itemClass).length;while(h.minSize>i){f(j,null,h);i++}j.find("."+h.addClass).click(function(k){f(j,k,h)});j.find("."+h.removeClass).click(function(k){e(j,a(this),k,h)})});function f(l,k,h){var j=l.find("."+h.itemClass).length;if(j<h.maxSize){var i=l.find("."+h.itemClass+":first").clone(h.withEvents);i.show();i.find("."+h.removeClass).click(function(m){e(l,a(this),m,h)});b(i,j);g(i);l.find("."+h.itemClass+":last").after(i);if(h.addCallbackFn!=null){h.addCallbackFn(i)}}if(k!=null){k.preventDefault()}}function e(m,i,l,h){var k=m.find("."+h.itemClass).length;var j=i.parents("."+h.itemClass+":first");if(k==h.minSize){g(j)}else{j.remove()}c(m,h);if(h.removeCallbackFn!=null){h.removeCallbackFn(j)}l.preventDefault()}function b(h,i){h.find("label, input, select, textarea").each(function(){var k=["class","name","id","for"];for(var l=0;l<k.length;l++){var j=a(this).attr(k[l]);if(j){j=j.replace(/\d+\./,i+".");j=j.replace(/\[\d+\]\./,"["+i+"].");a(this).attr(k[l],j)}}})}function c(i,h){i.find("."+h.itemClass).each(function(){var j=i.find("."+h.itemClass).index(this);var k=a(this);b(k,j)})}function g(h){h.find("input[type=text], textarea").val("");h.find("input[type=radio]").attr({checked:false});h.find("input[type=checkbox]").attr({checked:false})}}})(jQuery);